<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>åƒä»€éº¼å¥½å‘¢ï¼Ÿè½‰ç›¤</title>

    <style>
        @font-face {
            font-family: 'Huninn';
            src: url('./jf-openhuninn-2.1.ttf') format('truetype');
        }

        body {
            margin: 0;
            background: #fdf7ff;
            font-family: 'Huninn', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 {
            font-family: 'Huninn';
            margin-top: 20px;  /* ğŸ”¼ å·²å¾€ä¸Šç§» */
            font-size: 42px;
            color: #333;
        }

        #wheel {
            margin-top: 10px;
        }

        button {
            margin-top: 20px;
            font-size: 20px;
            padding: 10px 20px;
            border-radius: 12px;
            font-family: 'Huninn';
            border: none;
            background: #ffd6e7;
            cursor: pointer;
        }

        button:hover {
            background: #ffbfdc;
        }
    </style>
</head>
<body>

    <!-- ğŸ”¼ æ–°å¢çš„æ¨™é¡Œï¼ˆå·²ä¸Šç§»ï¼‰ -->
    <h1>åƒä»€éº¼å¥½å‘¢ï¼Ÿ</h1>

    <canvas id="wheel" width="500" height="500"></canvas>

    <button onclick="spin()">è½‰ä¸€ä¸‹ï¼</button>

    <script>
        async function loadHuninnFont() {
            const font = new FontFace('Huninn', 'url(./jf-openhuninn-2.1.ttf)');
            await font.load();
            document.fonts.add(font);
        }

        loadHuninnFont().then(() => drawWheel());

        const foods = [
            "æ‹‰éºµ", "ç«é‹", "ç‚’é£¯", "æ»·è‚‰é£¯",
            "ç‰›è‚‰éºµ", "æ°´é¤ƒ", "æŠ«è–©", "æ¼¢å ¡"
        ];

        const wheel = document.getElementById("wheel");
        const ctx = wheel.getContext("2d");
        const size = wheel.width / 2;
        let angle = 0;

        function drawWheel() {
            const step = (Math.PI * 2) / foods.length;

            ctx.clearRect(0, 0, wheel.width, wheel.height);
            ctx.save();
            ctx.translate(size, size);

            for (let i = 0; i < foods.length; i++) {
                ctx.beginPath();
                ctx.fillStyle = pastelColor(i);
                ctx.moveTo(0, 0);
                ctx.arc(0, 0, size, i * step, (i + 1) * step);
                ctx.fill();
                ctx.closePath();

                // --- æ–‡å­— ---
                ctx.save();
                ctx.rotate(i * step + step / 2);
                ctx.textAlign = "center";
                ctx.font = "28px Huninn";
                ctx.fillStyle = "#333";
                ctx.fillText(foods[i], size * 0.65, 10);
                ctx.restore();
            }

            ctx.restore();
            drawPointer();
        }

        function pastelColor(index) {
            const base = [
                "#ffdce5", "#ffe8c2", "#e7ffd7",
                "#d7f0ff", "#e3d7ff", "#ffd7f6",
                "#ffefd7", "#d7ffe5"
            ];
            return base[index % base.length];
        }

        function drawPointer() {
            ctx.fillStyle = "#ff4d6d";
            ctx.beginPath();
            ctx.moveTo(size, 10);
            ctx.lineTo(size - 15, 50);
            ctx.lineTo(size + 15, 50);
            ctx.closePath();
            ctx.fill();
        }

        function spin() {
            let spinAngle = Math.random() * 4 + 6;
            let spinTime = 0;
            let spinTimeTotal = 2500;

            function rotate() {
                spinTime += 20;

                angle += spinAngle;
                wheel.style.transform = `rotate(${angle}deg)`;

                if (spinTime < spinTimeTotal) {
                    requestAnimationFrame(rotate);
                }
            }
            rotate();
        }
    </script>

</body>
</html>
